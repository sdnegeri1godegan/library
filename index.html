<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“š Perpustakaan Digital Kuncup Mekar 1</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- ğŸ¯ NAVBAR -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1>ğŸ“š PERPUSTAKAAN KUNCUP MEKAR 1</h1>
            </div>
            <div class="nav-menu">
                <a href="#home" class="nav-link active" data-view="home">ğŸ  HOME</a>
                <a href="#opac" class="nav-link" data-view="opac">ğŸ” OPAC</a>
                <a href="#status" class="nav-link" data-view="status">ğŸ‘¤ CEK STATUS</a>
                <a href="#login" class="nav-link" data-view="login">ğŸ” ADMIN LOGIN</a>
            </div>
        </div>
    </nav>

    <!-- ğŸ¯ MAIN CONTENT AREA -->
    <main class="main-content">
        
        <!-- ğŸ  HOME VIEW -->
        <div id="homeView" class="page-view active">
            <section class="hero-section">
                <div class="hero-content">
                    <h1>Selamat Datang di Perpustakaan Digital Kuncup Mekar 1</h1>
                    <p>Sistem manajemen perpustakaan digital modern untuk SD Negeri 1 Godegan</p>
                    <div class="hero-actions">
                        <button class="btn-primary" onclick="router.navigate('opac')">Jelajahi Katalog</button>
                        <button class="btn-secondary" onclick="router.navigate('status')">Cek Status Siswa</button>
                    </div>
                </div>
            </section>

            <section class="stats-section">
                <h2>ğŸ“Š Statistik Real-time</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“š</div>
                        <div class="stat-number" id="totalBooks">0</div>
                        <div class="stat-label">Total Buku</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ‘¥</div>
                        <div class="stat-number" id="totalMembers">0</div>
                        <div class="stat-label">Total Anggota</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“</div>
                        <div class="stat-number" id="activeStudents">0</div>
                        <div class="stat-label">Siswa Aktif</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">âœ…</div>
                        <div class="stat-number" id="availableBooks">0</div>
                        <div class="stat-label">Buku Tersedia</div>
                    </div>
                </div>
            </section>

            <section class="featured-section">
                <h2>ğŸ“š Buku Terbaru & Populer</h2>
                <div class="books-grid" id="featuredBooks">
                    <!-- Books will be loaded dynamically -->
                    <div class="loading">Memuat buku...</div>
                </div>
            </section>

            <section class="info-section">
                <div class="info-grid">
                    <div class="info-card">
                        <h3>ğŸ« Informasi Perpustakaan</h3>
                        <div class="info-content">
                            <p><strong>Jam Operasional:</strong><br>Senin - Jumat: 07:30 - 14:00</p>
                            <p><strong>Lokasi:</strong><br>Gedung Perpustakaan SD Kuncup Mekar 1</p>
                            <p><strong>Petugas:</strong><br>Bu Siti (Kepala Perpustakaan)</p>
                        </div>
                    </div>
                    <div class="info-card">
                        <h3>ğŸ“‹ Aturan Peminjaman</h3>
                        <div class="info-content">
                            <p><strong>Siswa:</strong> Maksimal 5 buku</p>
                            <p><strong>Durasi Pinjam:</strong></p>
                            <ul>
                                <li>Buku A (Pelajaran): 365 hari</li>
                                <li>Buku B (Umum): 7 hari</li>
                                <li>Buku C (Referensi): Tidak bisa dipinjam</li>
                            </ul>
                            <p><strong>Denda:</strong> Rp 1.000/hari</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="quick-status-section">
                <h2>ğŸ‘¤ Cek Status Cepat</h2>
                <div class="status-checker">
                    <input type="text" id="quickNis" placeholder="Masukkan NIS siswa" class="status-input">
                    <button onclick="checkQuickStatus()" class="btn-primary">Cek Status</button>
                </div>
                <div id="quickStatusResult" class="status-result"></div>
            </section>
        </div>

        <!-- ğŸ” OPAC VIEW -->
        <div id="opacView" class="page-view">
            <div class="opac-header">
                <button class="back-btn" onclick="router.navigate('home')">â† Kembali ke Beranda</button>
                <h1>ğŸ” Katalog Buku Online (OPAC)</h1>
            </div>

            <section class="search-section">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Cari judul, penulis, atau kata kunci..." class="search-input">
                    <button onclick="performSearch()" class="search-btn">Cari</button>
                </div>
                
                <div class="filters-row">
                    <div class="filter-group">
                        <label>Jenis Buku:</label>
                        <select id="bookTypeFilter">
                            <option value="all">Semua</option>
                            <option value="A">Buku A (Pelajaran)</option>
                            <option value="B">Buku B (Umum)</option>
                            <option value="C">Buku C (Referensi)</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Status:</label>
                        <select id="statusFilter">
                            <option value="all">Semua</option>
                            <option value="available">Tersedia</option>
                            <option value="borrowed">Dipinjam</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Kategori:</label>
                        <select id="categoryFilter">
                            <option value="all">Semua Kategori</option>
                            <!-- Categories will be loaded dynamically -->
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Urutkan:</label>
                        <select id="sortFilter">
                            <option value="Judul">Judul A-Z</option>
                            <option value="Judul DESC">Judul Z-A</option>
                            <option value="Tahun_Terbit DESC">Terbaru</option>
                            <option value="Tahun_Terbit">Terlama</option>
                        </select>
                    </div>
                </div>

                <div class="quick-filters">
                    <button class="quick-filter active" data-filter="all">Semua</button>
                    <button class="quick-filter" data-filter="A">Buku Pelajaran</button>
                    <button class="quick-filter" data-filter="B">Buku Umum</button>
                    <button class="quick-filter" data-filter="C">Referensi</button>
                </div>
            </section>

            <section class="results-section">
                <div class="results-header">
                    <span id="resultsCount">Menampilkan 0 buku</span>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid">Grid</button>
                        <button class="view-btn" data-view="list">List</button>
                    </div>
                </div>
                
                <div class="books-container grid-view" id="searchResults">
                    <div class="loading">Gunakan form pencarian di atas...</div>
                </div>
                
                <div class="pagination" id="pagination">
                    <!-- Pagination will be generated dynamically -->
                </div>
            </section>
        </div>

        <!-- ğŸ‘¤ STATUS VIEW -->
        <div id="statusView" class="page-view">
            <div class="status-header">
                <button class="back-btn" onclick="router.navigate('home')">â† Kembali ke Beranda</button>
                <h1>ğŸ‘¤ Cek Status Peminjaman Siswa</h1>
            </div>

            <section class="status-checker-section">
                <div class="status-input-container">
                    <input type="text" id="statusNis" placeholder="Masukkan NIS siswa" class="status-input-large">
                    <button onclick="checkStudentStatus()" class="btn-primary-large">Cek Status</button>
                </div>
            </section>

            <section class="status-results-section">
                <div id="statusResults">
                    <div class="status-placeholder">
                        <p>Masukkan NIS siswa untuk melihat status peminjaman</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- ğŸ” LOGIN VIEW -->
        <div id="loginView" class="page-view">
            <div class="login-header">
                <button class="back-btn" onclick="router.navigate('home')">â† Kembali ke Beranda</button>
                <h1>ğŸ” Admin Login</h1>
            </div>

            <section class="login-section">
                <div class="login-container">
                    <div class="login-form">
                        <div class="form-group">
                            <label for="username">Username:</label>
                            <input type="text" id="username" placeholder="Masukkan username" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="password">Password:</label>
                            <input type="password" id="password" placeholder="Masukkan password" class="form-input">
                        </div>
                        <button onclick="adminLogin()" class="login-btn">Login</button>
                        <div id="loginMessage" class="login-message"></div>
                    </div>
                    
                    <div class="login-info">
                        <h3>â„¹ï¸ Informasi Login</h3>
                        <p>Hanya untuk administrator perpustakaan. Siswa dan guru dapat menggunakan fitur OPAC dan Cek Status tanpa login.</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- ğŸ“– BOOK DETAILS MODAL -->
    <div id="bookModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="bookModalContent">
                <!-- Book details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- âš ï¸ LOADING OVERLAY -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Memuat data...</p>
    </div>

    <script src="js/api.js"></script>
    <script src="js/router.js"></script>
    <script src="js/app.js"></script>
</body>
</html>